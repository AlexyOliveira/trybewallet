{"ast":null,"code":"import _regeneratorRuntime from\"/home/alexandre/Desktop/New Folder 1/trybewallet/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/alexandre/Desktop/New Folder 1/trybewallet/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/alexandre/Desktop/New Folder 1/trybewallet/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/home/alexandre/Desktop/New Folder 1/trybewallet/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/alexandre/Desktop/New Folder 1/trybewallet/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/alexandre/Desktop/New Folder 1/trybewallet/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/alexandre/Desktop/New Folder 1/trybewallet/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{connect}from'react-redux';import{fetchCurrencies,saveEdited,saveForm}from'../redux/actions';import getFullCurrencyApi from'../services/FullCurrencyAPI';import'./walletForm.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var aliment='Alimentação';var WalletForm=/*#__PURE__*/function(_Component){_inherits(WalletForm,_Component);var _super=_createSuper(WalletForm);function WalletForm(){var _this;_classCallCheck(this,WalletForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={id:0,value:'',description:'',currency:'USD',method:'Dinheiro',tag:aliment};_this.handleChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var currencyAPI,dispatch,_this$state,id,value,description,currency,method,tag;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return getFullCurrencyApi();case 3:currencyAPI=_context.sent;dispatch=_this.props.dispatch;_this$state=_this.state,id=_this$state.id,value=_this$state.value,description=_this$state.description,currency=_this$state.currency,method=_this$state.method,tag=_this$state.tag;dispatch(saveForm({id:id,value:value,description:description,currency:currency,method:method,tag:tag,exchangeRates:currencyAPI}));_this.setState({id:id+1});_this.handleReset();case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleReset=function(){_this.setState({value:'',description:'',currency:'USD',method:'Dinheiro',tag:aliment});};_this.editInfos=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _this$props,dispatch,editId,_this$state2,value,description,currency,method,tag,currencyAPI,formBG;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props=_this.props,dispatch=_this$props.dispatch,editId=_this$props.editId;_this$state2=_this.state,value=_this$state2.value,description=_this$state2.description,currency=_this$state2.currency,method=_this$state2.method,tag=_this$state2.tag;_context2.next=4;return getFullCurrencyApi();case 4:currencyAPI=_context2.sent;dispatch(saveEdited({id:editId,value:value,description:description,currency:currency,method:method,tag:tag,exchangeRates:currencyAPI}));_this.setState({value:'',description:'',currency:'USD',method:'Dinheiro',tag:aliment});formBG=document.querySelector('.formBG');formBG.style.background='rgba(225, 229, 235, 0.49)';case 9:case\"end\":return _context2.stop();}}},_callee2);}));return _this;}_createClass(WalletForm,[{key:\"componentDidMount\",value:function componentDidMount(){var dispatch=this.props.dispatch;dispatch(fetchCurrencies());}},{key:\"render\",value:function render(){var _this2=this;var _this$props2=this.props,currencies=_this$props2.currencies,edit=_this$props2.edit;var _this$state3=this.state,description=_this$state3.description,currency=_this$state3.currency,value=_this$state3.value,method=_this$state3.method,tag=_this$state3.tag;return/*#__PURE__*/_jsx(\"div\",{className:\"walletFormMain\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"formBG\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"number\",children:[\"Valor\",/*#__PURE__*/_jsx(\"input\",{onChange:this.handleChange,name:\"value\",\"data-testid\":\"value-input\",id:\"number\",type:\"number\",value:value})]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"description\",children:[\"Descri\\xE7\\xE3o\",/*#__PURE__*/_jsx(\"input\",{onChange:this.handleChange,name:\"description\",\"data-testid\":\"description-input\",id:\"description\",type:\"text\",value:description})]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"currency\",children:[\"Moeda\",/*#__PURE__*/_jsx(\"select\",{onChange:this.handleChange,\"data-testid\":\"currency-input\",name:\"currency\",id:\"currency\",value:currency,children:currencies.map(function(currenc){return/*#__PURE__*/_jsx(\"option\",{children:currenc},currenc);})})]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"paymentMethod\",children:[\"M\\xE9todo de pagamento\",/*#__PURE__*/_jsxs(\"select\",{onChange:this.handleChange,\"data-testid\":\"method-input\",name:\"method\",id:\"paymentMethod\",value:method,children:[/*#__PURE__*/_jsx(\"option\",{children:\"Dinheiro\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Cart\\xE3o de cr\\xE9dito\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Cart\\xE3o de d\\xE9bito\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"category\",children:[\"Categoria\",/*#__PURE__*/_jsxs(\"select\",{onChange:this.handleChange,\"data-testid\":\"tag-input\",name:\"tag\",id:\"category\",value:tag,children:[/*#__PURE__*/_jsx(\"option\",{children:\"Alimenta\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Lazer\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Trabalho\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Transporte\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Sa\\xFAde\"})]})]})]}),edit?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning\",type:\"button\",onClick:function onClick(){return _this2.editInfos();},children:\"Salvar edi\\xE7\\xE3o\"}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning addexpense\",type:\"submit\",children:\"Adicionar despesa\"})]})});}}]);return WalletForm;}(Component);var mapStateToProps=function mapStateToProps(globalState){return{currencies:globalState.wallet.currencies,edit:globalState.wallet.edit,editId:globalState.wallet.editId};};export default connect(mapStateToProps)(WalletForm);","map":{"version":3,"names":["React","Component","connect","fetchCurrencies","saveEdited","saveForm","getFullCurrencyApi","aliment","WalletForm","state","id","value","description","currency","method","tag","handleChange","event","setState","target","name","handleSubmit","preventDefault","currencyAPI","dispatch","props","exchangeRates","handleReset","editInfos","editId","formBG","document","querySelector","style","background","currencies","edit","map","currenc","mapStateToProps","globalState","wallet"],"sources":["/home/alexandre/Desktop/New Folder 1/trybewallet/src/components/WalletForm.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport Proptypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { fetchCurrencies, saveEdited, saveForm } from '../redux/actions';\nimport getFullCurrencyApi from '../services/FullCurrencyAPI';\nimport './walletForm.css';\n\nconst aliment = 'Alimentação';\n\nclass WalletForm extends Component {\n  state = {\n    id: 0,\n    value: '',\n    description: '',\n    currency: 'USD',\n    method: 'Dinheiro',\n    tag: aliment,\n  };\n\n  componentDidMount() {\n    const { dispatch } = this.props;\n    dispatch(fetchCurrencies());\n  }\n\n  handleChange = (event) => {\n    this.setState({\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  handleSubmit = async (event) => {\n    event.preventDefault();\n    const currencyAPI = await getFullCurrencyApi();\n    const { dispatch } = this.props;\n    const { id, value, description, currency, method, tag } = this.state;\n    dispatch(\n      saveForm({\n        id,\n        value,\n        description,\n        currency,\n        method,\n        tag,\n        exchangeRates: currencyAPI,\n      }),\n    );\n    this.setState({\n      id: id + 1,\n    });\n    this.handleReset();\n  };\n\n  handleReset = () => {\n    this.setState({\n      value: '',\n      description: '',\n      currency: 'USD',\n      method: 'Dinheiro',\n      tag: aliment,\n    });\n  };\n\n  editInfos = async () => {\n    const { dispatch, editId } = this.props;\n    const { value, description, currency, method, tag } = this.state;\n    const currencyAPI = await getFullCurrencyApi();\n    dispatch(\n      saveEdited({\n        id: editId,\n        value,\n        description,\n        currency,\n        method,\n        tag,\n        exchangeRates: currencyAPI,\n      }),\n    );\n    this.setState({\n      value: '',\n      description: '',\n      currency: 'USD',\n      method: 'Dinheiro',\n      tag: aliment,\n    });\n    const formBG = document.querySelector('.formBG');\n    formBG.style.background = 'rgba(225, 229, 235, 0.49)';\n  };\n\n  render() {\n    const { currencies, edit } = this.props;\n    const { description, currency, value, method, tag } = this.state;\n    return (\n      <div className=\"walletFormMain\">\n        <form onSubmit={ this.handleSubmit }>\n          <div className=\"formBG\">\n            <label htmlFor=\"number\">\n              Valor\n              <input\n                onChange={ this.handleChange }\n                name=\"value\"\n                data-testid=\"value-input\"\n                id=\"number\"\n                type=\"number\"\n                value={ value }\n              />\n            </label>\n            <label htmlFor=\"description\">\n              Descrição\n              <input\n                onChange={ this.handleChange }\n                name=\"description\"\n                data-testid=\"description-input\"\n                id=\"description\"\n                type=\"text\"\n                value={ description }\n              />\n            </label>\n\n            <label htmlFor=\"currency\">\n              Moeda\n              <select\n                onChange={ this.handleChange }\n                data-testid=\"currency-input\"\n                name=\"currency\"\n                id=\"currency\"\n                value={ currency }\n              >\n                {currencies.map((currenc) => (\n                  <option key={ currenc }>{currenc}</option>\n                ))}\n              </select>\n            </label>\n\n            <label htmlFor=\"paymentMethod\">\n              Método de pagamento\n              <select\n                onChange={ this.handleChange }\n                data-testid=\"method-input\"\n                name=\"method\"\n                id=\"paymentMethod\"\n                value={ method }\n              >\n                <option>Dinheiro</option>\n                <option>Cartão de crédito</option>\n                <option>Cartão de débito</option>\n              </select>\n            </label>\n\n            <label htmlFor=\"category\">\n              Categoria\n              <select\n                onChange={ this.handleChange }\n                data-testid=\"tag-input\"\n                name=\"tag\"\n                id=\"category\"\n                value={ tag }\n              >\n                <option>Alimentação</option>\n                <option>Lazer</option>\n                <option>Trabalho</option>\n                <option>Transporte</option>\n                <option>Saúde</option>\n              </select>\n            </label>\n          </div>\n          {edit ? (\n            <button\n              className=\"btn btn-warning\"\n              type=\"button\"\n              onClick={ () => this.editInfos() }\n            >\n              Salvar edição\n            </button>\n          ) : (\n            <button className=\"btn btn-warning addexpense\" type=\"submit\">\n              Adicionar despesa\n            </button>\n          )}\n        </form>\n      </div>\n    );\n  }\n}\n\nWalletForm.propTypes = {\n  email: Proptypes.array,\n}.isRequired;\n\nconst mapStateToProps = (globalState) => ({\n  currencies: globalState.wallet.currencies,\n  edit: globalState.wallet.edit,\n  editId: globalState.wallet.editId,\n});\n\nexport default connect(mapStateToProps)(WalletForm);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}